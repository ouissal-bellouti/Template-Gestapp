<div class="content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header"><h3 class="title">Ajouter un Devis</h3>
        <div class="button-row">
          <a class="title" class="disabled" color="" [routerLink]="['/devis']"><button class="btn btn-danger btn-link">Liste</button></a> / Ajouter
        </div>
      </div>

   <div class="card-body">
     <form [formGroup] ="this.service.formData" (ngSubmit)="onSubmit()">
        <div class="row">
          <input type="hidden" class="form-control" formControlName="nomClient" id="nomClient">
          <div class="col-md-4 pr-md-1">
            <div class="form-group">
              <label> <strong> Ref Devis : </strong> </label>
              <input type="hidden" formControlName="id">
              <input
              class="form-control"
              type="text"
              formControlName="numero"
              id="numero"
              readonly
              />
            </div>
          </div>

          <div class="col-md-4 pr-md-1">
            <div class="form-group">
              <label> Date Création</label>
              <input
              type="date"
              class="form-control"
              formControlName="dateCreation"
              placeholder="dateCreation"
              />
            </div>
          </div>

          <div class="col-md-4 pr-md-1">
            <div class="form-group">
              <label> Client </label>
              <select
              name="clientId"
              class="form-control"
              formControlName="clientId"
              id="clientId"
              (change)="OnSelectClient($event)"
              >
              <option value="0">-Select-</option>
              <option *ngFor="let client of this.ClientList" value=" {{client.id}} "> {{client.Nom}} </option>
              </select>
            </div>
          </div>
          </div>

          <table class="table table-borderless">
            <thead>
              <th>Designation</th>
              <th>Quantité</th>
              <th>  Prix HT  </th>
              <th> Totale HT  </th>
              <th>  TVA  </th>
              <th>  Totale TTC  </th>
              <th>
                <button   class="btn btn-sm- btn-dark text-light" (click)="AddData(null,1)">
                <i class=" tim-icons icon-simple-add"> </i>

              </button>
            </th>
            </thead>
            <tbody>
              <tr *ngIf="service.list.length==0"
                [class.text-danger]="!isValid && service.list.length==0">
                <td>
                  Aucune Article sélectionnée...
                </td>
              </tr>
              <tr *ngFor="let item of service.list; let i=index;">
                <td> {{item.Designation}} </td>
                <td> {{item.Quantite}} </td>
                <td> {{item.prixHT}} </td>
                <td> {{item.totHT}} </td>
                <td> {{item.TVA}} </td>
                <td> {{item.totTTC}} </td>
                <td>
                    <button class=" btn btn-link" type="button" placement="left" ngbTooltip="Edit" container="body" (click)="AddData(i,1)">
                      <i class=" tim-icons icon-pencil"> </i>
                    </button>
                    <button class=" btn btn-link" placement="left" ngbTooltip="Delete"  (click)="onDelete(item,item.id,i)">
                      <i class=" tim-icons icon-trash-simple"> </i>
                    </button>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="form-group row">
            <div class="col-sm-4 mb-3 mb-sm-0">
              <div class="form-group">
                  <label>Total Ht : </label>
                  <input type="text" class="form-control" id="totHT" formControlName="totHT" readonly>
              </div>
              </div>
              <div class="col-sm-4 mb-3 mb-sm-0">
              <div class="form-group">
                  <label>Total Tva  : </label>
                  <input type="text" class="form-control" id="TVA" formControlName="TVA" readonly>
              </div>
              </div>
              <div class="col-sm-4 mb-3 mb-sm-0">
              <div class="form-group">
              <label>Total TTC : </label>
              <input type="text" class="form-control" id="totTTC" formControlName="totTTC" readonly>
              </div>
              </div>
          </div>

     <div class=" card-footer">
    <button class=" btn btn-fill btn-danger" type="submit" >Save</button>
       </div>
     </form>

   </div>


    </div>

  </div>
</div>

